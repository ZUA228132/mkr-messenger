<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MKR Admin Panel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .login-container {
            max-width: 400px;
            margin: 100px auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            display: none;
        }

        .header {
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #667eea;
            font-size: 28px;
        }

        .logout-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: #ff3838;
            transform: translateY(-2px);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .stat-card .value {
            font-size: 36px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-card .label {
            color: #999;
            font-size: 12px;
            margin-top: 5px;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .panel {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .panel h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .user-list, .chat-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .user-item, .chat-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-item:hover, .chat-item:hover {
            background: #f8f9fa;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: bold;
            color: #333;
        }

        .user-email {
            color: #999;
            font-size: 12px;
        }

        .badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 5px;
        }

        .badge.admin {
            background: #667eea;
            color: white;
        }

        .badge.verified {
            background: #2ecc71;
            color: white;
        }

        .badge.banned {
            background: #e74c3c;
            color: white;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 5px;
            transition: all 0.3s;
        }

        .btn-verify {
            background: #2ecc71;
            color: white;
        }

        .btn-ban {
            background: #e74c3c;
            color: white;
        }

        .btn-unban {
            background: #3498db;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        input[type="text"], input[type="password"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 15px;
            transition: border 0.3s;
        }

        input[type="text"]:focus, input[type="password"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .login-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .error {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 10px;
            text-align: center;
        }

        .loading {
            text-align: center;
            color: #999;
            padding: 20px;
        }

        .server-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .server-info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .server-info-item:last-child {
            border-bottom: none;
        }

        .server-info-label {
            color: #666;
            font-weight: 500;
        }

        .server-info-value {
            color: #333;
            font-family: monospace;
        }

        .status-online {
            color: #2ecc71;
            font-weight: bold;
        }

        .status-offline {
            color: #e74c3c;
            font-weight: bold;
        }

        .tab-btn {
            padding: 10px 20px;
            border: none;
            background: transparent;
            color: #666;
            font-size: 16px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: bold;
        }

        .tab-btn:hover {
            color: #667eea;
        }

        .log-line {
            padding: 4px 0;
            border-bottom: 1px solid #333;
        }

        .log-line:hover {
            background: #2a2a2a;
        }

        .log-error {
            color: #f48771;
        }

        .log-warn {
            color: #dcdcaa;
        }

        .log-info {
            color: #4ec9b0;
        }

        .log-timestamp {
            color: #858585;
        }

        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Login Form -->
    <div class="login-container" id="loginContainer">
        <h2 style="text-align: center; color: #667eea; margin-bottom: 30px;">üõ°Ô∏è MKR Admin Panel</h2>
        <input type="text" id="loginUsername" placeholder="Username" value="admin">
        <input type="password" id="loginPassword" placeholder="Password" value="admin123">
        <button class="login-btn" onclick="login()">–í–æ–π—Ç–∏</button>
        <div class="error" id="loginError"></div>
    </div>

    <!-- Admin Dashboard -->
    <div class="admin-container" id="adminContainer">
        <div class="header">
            <h1>üõ°Ô∏è MKR Admin Panel</h1>
            <button class="logout-btn" onclick="logout()">–í—ã–π—Ç–∏</button>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                <div class="value" id="totalUsers">-</div>
                <div class="label">–í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ</div>
            </div>
            <div class="stat-card">
                <h3>–û–Ω–ª–∞–π–Ω</h3>
                <div class="value" id="onlineUsers">-</div>
                <div class="label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–π—á–∞—Å</div>
            </div>
            <div class="stat-card">
                <h3>–ß–∞—Ç—ã</h3>
                <div class="value" id="totalChats">-</div>
                <div class="label">–í—Å–µ–≥–æ —á–∞—Ç–æ–≤</div>
            </div>
            <div class="stat-card">
                <h3>–°–æ–æ–±—â–µ–Ω–∏—è</h3>
                <div class="value" id="totalMessages">-</div>
                <div class="label">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</div>
            </div>
            <div class="stat-card">
                <h3>–ö–∞–Ω–∞–ª—ã</h3>
                <div class="value" id="totalChannels">-</div>
                <div class="label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤</div>
            </div>
            <div class="stat-card">
                <h3>–ó–≤–æ–Ω–∫–∏</h3>
                <div class="value" id="totalCalls">-</div>
                <div class="label">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24—á</div>
            </div>
            <div class="stat-card">
                <h3>–ü–∞–º—è—Ç—å</h3>
                <div class="value" id="memoryUsage">-</div>
                <div class="label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
            </div>
            <div class="stat-card">
                <h3>CPU</h3>
                <div class="value" id="cpuUsage">-</div>
                <div class="label">–ó–∞–≥—Ä—É–∑–∫–∞</div>
            </div>
        </div>

        <!-- Tabs -->
        <div style="background: white; padding: 15px 30px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                <button class="tab-btn active" onclick="switchTab('overview')">üìä –û–±–∑–æ—Ä</button>
                <button class="tab-btn" onclick="switchTab('system')">üíª –°–∏—Å—Ç–µ–º–∞</button>
                <button class="tab-btn" onclick="switchTab('activity')">üìà –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</button>
                <button class="tab-btn" onclick="switchTab('logs')">üìú –õ–æ–≥–∏</button>
            </div>
        </div>

        <!-- Overview Tab -->
        <div class="content-grid" id="overviewTab">
            <!-- Server Info -->
            <div class="panel">
                <h2>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ</h2>
                <div class="server-info">
                    <div class="server-info-item">
                        <span class="server-info-label">–°—Ç–∞—Ç—É—Å Backend:</span>
                        <span class="server-info-value status-online" id="backendStatus">‚óè  Online</span>
                    </div>
                    <div class="server-info-item">
                        <span class="server-info-label">–°—Ç–∞—Ç—É—Å –ë–î:</span>
                        <span class="server-info-value status-online" id="dbStatus">‚óè Online</span>
                    </div>
                    <div class="server-info-item">
                        <span class="server-info-label">–í–µ—Ä—Å–∏—è:</span>
                        <span class="server-info-value">1.0.0</span>
                    </div>
                    <div class="server-info-item">
                        <span class="server-info-label">Uptime:</span>
                        <span class="server-info-value" id="uptime">-</span>
                    </div>
                </div>
                
                <h2 style="margin-top: 20px;">üìà –ü–æ—Å–ª–µ–¥–Ω–∏–µ —á–∞—Ç—ã</h2>
                <div class="chat-list" id="chatList">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>

            <!-- Users -->
            <div class="panel">
                <h2>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
                <div class="user-list" id="userList">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </div>

        <!-- System Tab -->
        <div id="systemTab" style="display: none;">
            <div class="stats-grid" style="margin-bottom: 20px;">
                <div class="stat-card">
                    <h3>JVM Memory</h3>
                    <div class="value" id="jvmMemory">-</div>
                    <div class="label">Heap –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</div>
                </div>
                <div class="stat-card">
                    <h3>Threads</h3>
                    <div class="value" id="threadCount">-</div>
                    <div class="label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤</div>
                </div>
                <div class="stat-card">
                    <h3>DB Connections</h3>
                    <div class="value" id="dbConnections">-</div>
                    <div class="label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π</div>
                </div>
                <div class="stat-card">
                    <h3>WebSocket</h3>
                    <div class="value" id="wsConnections">-</div>
                    <div class="label">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–π</div>
                </div>
            </div>
            
            <div class="panel">
                <h2>üíª –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                <div class="server-info">
                    <div class="server-info-item">
                        <span class="server-info-label">OS:</span>
                        <span class="server-info-value" id="osInfo">-</span>
                    </div>
                    <div class="server-info-item">
                        <span class="server-info-label">Java Version:</span>
                        <span class="server-info-value" id="javaVersion">-</span>
                    </div>
                    <div class="server-info-item">
                        <span class="server-info-label">Available Processors:</span>
                        <span class="server-info-value" id="processors">-</span>
                    </div>
                    <div class="server-info-item">
                        <span class="server-info-label">Total Memory:</span>
                        <span class="server-info-value" id="totalMemory">-</span>
                    </div>
                    <div class="server-info-item">
                        <span class="server-info-label">Free Memory:</span>
                        <span class="server-info-value" id="freeMemory">-</span>
                    </div>
                    <div class="server-info-item">
                        <span class="server-info-label">Max Memory:</span>
                        <span class="server-info-value" id="maxMemory">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Tab -->
        <div id="activityTab" style="display: none;">
            <div class="stats-grid" style="margin-bottom: 20px;">
                <div class="stat-card">
                    <h3>–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                    <div class="value" id="newUsersToday">-</div>
                    <div class="label">–ó–∞ —Å–µ–≥–æ–¥–Ω—è</div>
                </div>
                <div class="stat-card">
                    <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                    <div class="value" id="activeUsersToday">-</div>
                    <div class="label">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24—á</div>
                </div>
                <div class="stat-card">
                    <h3>–°–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å</h3>
                    <div class="value" id="messagesPerHour">-</div>
                    <div class="label">–°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å</div>
                </div>
                <div class="stat-card">
                    <h3>–ü–∏–∫ –æ–Ω–ª–∞–π–Ω–∞</h3>
                    <div class="value" id="peakOnline">-</div>
                    <div class="label">–ó–∞ —Å–µ–≥–æ–¥–Ω—è</div>
                </div>
            </div>
            
            <div class="content-grid">
                <div class="panel">
                    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º —á–∞—Ç–æ–≤</h2>
                    <div class="server-info">
                        <div class="server-info-item">
                            <span class="server-info-label">üí¨ –õ–∏—á–Ω—ã–µ —á–∞—Ç—ã:</span>
                            <span class="server-info-value" id="directChats">-</span>
                        </div>
                        <div class="server-info-item">
                            <span class="server-info-label">üë• –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã:</span>
                            <span class="server-info-value" id="groupChats">-</span>
                        </div>
                        <div class="server-info-item">
                            <span class="server-info-label">üì¢ –ö–∞–Ω–∞–ª—ã:</span>
                            <span class="server-info-value" id="channelChats">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="panel">
                    <h2>üìû –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–≤–æ–Ω–∫–æ–≤</h2>
                    <div class="server-info">
                        <div class="server-info-item">
                            <span class="server-info-label">–í—Å–µ–≥–æ –∑–≤–æ–Ω–∫–æ–≤:</span>
                            <span class="server-info-value" id="totalCallsAll">-</span>
                        </div>
                        <div class="server-info-item">
                            <span class="server-info-label">–£—Å–ø–µ—à–Ω—ã—Ö:</span>
                            <span class="server-info-value" id="successfulCalls">-</span>
                        </div>
                        <div class="server-info-item">
                            <span class="server-info-label">–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö:</span>
                            <span class="server-info-value" id="missedCalls">-</span>
                        </div>
                        <div class="server-info-item">
                            <span class="server-info-label">–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</span>
                            <span class="server-info-value" id="avgCallDuration">-</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel" style="margin-top: 20px;">
                <h2>üë• –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
                <div id="recentActivity" style="max-height: 400px; overflow-y: auto;">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </div>

        <!-- Logs Tab -->
        <div id="logsTab" style="display: none;">
            <div class="panel" style="max-width: 100%;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>üìú –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞</h2>
                    <div>
                        <button class="btn" style="background: #667eea; color: white;" onclick="refreshLogs()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                        <button class="btn" style="background: #e74c3c; color: white;" onclick="clearLogsView()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                        <label style="margin-left: 15px;">
                            <input type="checkbox" id="autoScrollLogs" checked> –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞
                        </label>
                    </div>
                </div>
                
                <div style="background: #1e1e1e; color: #d4d4d4; padding: 20px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 12px; max-height: 600px; overflow-y: auto;" id="logsContainer">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>
